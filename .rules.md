# Auto-generated collateral rules

- Do not manually edit files under `hw/ip/<ip>/scdv/{env,tests,ral}` that are generated by scripts.
- Use `util/gen_scdv_collateral.py` to (re)generate SystemC DV collateral:
  - Dry-run (diff only): `util/gen_scdv_collateral.py --tmp-out <ip>` or `--all` for all IPs.
  - Apply updates: `util/gen_scdv_collateral.py <ip>` (omit `--tmp-out`).
- Reg model sources under `hw/ip/<ip>/tlm` and SV RAL under `hw/ip/<ip>/dv` should be regenerated via `util/regtool.py` (driven by `gen_scdv_collateral.py`).
- Template and scaffold updates belong under `util/uvmdvgen/` and `util/reggen/` directories, not in generated outputs.
- When running in parallel, ensure unique FC4SC output via `FC4SC_OUTDIR`/`FC4SC_BASENAME`.

# Repository Operational Rules

This document captures repository-wide rules for safe generation, modification, and deletion of auto-generated collateral and related sources.

## DV Collateral Deletion Rule (Must-Follow)

When deleting or replacing any SystemC DV, SV DV, or generator-produced collateral:

1) Regenerate first
- Use the authoritative generator (e.g., util/uvmdvgen.py, regtool.py, or equivalent) to regenerate the target collateral into a temporary location (not in-place).
- Ensure the same options/flags and target IP(s) are used as the current checked-in content.

2) Compare regenerated vs current
- Perform a recursive diff between the regenerated output and the current tree.
- Review all mismatches. Do not delete anything at this step.

3) Propagate manual edits into the generator/scaffold
- If current files contain manual changes not reflected by the generator/scaffold, update the generator/scaffold so it emits those changes.
- Re-run the generator to the temp location and re-diff until regenerated output matches the desired current content.

4) Verify parity before delete
- Only when regenerated output matches the intended final content (functionally and structurally), proceed.
- Keep a short note of the generator command/flags used (in the commit message or PR description).

5) Safe delete/replace
- Delete or replace the superseded files in the repository with the verified regenerated output.
- Never delete before steps (1)-(4) are complete and validated.

## Source of Truth for Generated Files

- The generator/scaffold is the source of truth. Manual edits to generated files must be ported back into the generator/scaffold.
- After updating the generator/scaffold, immediately regenerate and verify diffs as described above.

## Traceability

- For changes to generator logic or templates, include:
  - The exact command used to regenerate
  - The scope of affected IP(s) and directories
  - A summary of intentional diffs

## Notes

- This rule applies equally to SystemC DV (scdv), SystemVerilog DV (dv/sv), RAL outputs, coverage/HTML artifacts, and any auto-generated collateral.
- If a file was created or modified manually by Cursor (or by hand), it must be added to the generator/scaffold first, then regenerated and verified before any deletion of the manual copy.
